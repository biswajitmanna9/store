<loading [state]="loading">
<app-site-header></app-site-header>
<div class="clearfix"></div>
<div class="background-pink">
  <mat-horizontal-stepper [linear]="isLinear" #stepper="matHorizontalStepper">
    <mat-step [stepControl]="stepOne" class="contact-form row">
      <form [formGroup]="stepOne">
        <div class="container">
          <div class="row">
            <div class="col-md-6 padding-top-50">
              <section class="get-in-touch">

                <div class="contact-form row">
                  <div class="form-field col col-md-12">
                    <mat-form-field class="input-full-width">
                      <mat-icon matPrefix>card_travel</mat-icon>
                      <input class="form-control" matInput placeholder="Name Of Your Business" formControlName="business_name" [(ngModel)]="step_one_data.business_name"
                        (keyup)=checkBusinessName() (keydown)=checkBusinessName()>
                      <mat-error *ngIf="isFieldValid(stepOne,'business_name')"> Please Enter Business Name</mat-error>

                    </mat-form-field>

                    <p class="btn-switch">
                      <mat-slide-toggle [checked]="haveBusinessName"></mat-slide-toggle>
                    </p>
                  </div>
                  <div class="form-field col col-md-12">
                    <mat-form-field class="input-full-width">
                      <mat-icon matPrefix>info</mat-icon>
                      <input matInput placeholder="Description Of Your Business" formControlName="business_description" [(ngModel)]="step_one_data.business_description"
                        (keyup)=checkBusinessDescription() (keydown)=checkBusinessDescription()>
                    </mat-form-field>

                    <p class="btn-switch">
                      <mat-slide-toggle [checked]="haveBusinessDescription"></mat-slide-toggle>
                    </p>
                  </div>

                  <div class="form-field col-md-6">
                    <div class="upload-filed">
                      <input type="file" name="logo" formControlName="logo" (change)="appLogoChange($event.target.files)" accept="image/*">
                      <p class="btn-switch">
                        <mat-slide-toggle></mat-slide-toggle>
                      </p>
                    </div>
                  </div>

                  <div class="form-field col-md-6">
                    <div class="upload-filed  business-photo">

                      <input type="file" name="business_photos" formControlName="business_photos" (change)="businessPhotoChange($event)" accept="image/*"
                        multiple>
                      <p class="btn-switch">
                        <mat-slide-toggle></mat-slide-toggle>
                      </p>
                    </div>
                  </div>
                  <div class="form-field col-md-12">
                    <div class="row">

                      <div class="form-field align-center col-md-5">
                        <button class="round-g-btn" (click)="submitStepOne()">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
            <div class="col-md-6">
              <div class="col-md-12 get-in-touch  padding-top-bottom-10">
                <div class="container">
                  <h1 class="title fontface-one text-color-darkgrey-b letter-spacing">
                    Edit your app
                  </h1>
                </div>
              </div>

              <div class="mob">
                <div class="wallpaper-size resturent-screen apps-design padding-10 text-center ">
                  <img [src]="step_one_data.logo ?step_one_data.logo : 'assets/images/resturent-logo.png'" alt="" alt="">
                  <h1>{{step_one_data.business_name}}</h1>
                  <div class="description ">

                    <p>{{step_one_data.business_description}}</p>
                  </div>
                  <div class="sub-image" *ngIf="step_one_data.business_photos.length > 0">
                    <ul>
                      <li *ngFor="let img of step_one_data.business_photos">
                        <img [src]="img" alt="">
                      </li>
                    </ul>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="stepThree">
      <form [formGroup]="stepThree" class="contact-form row">
        <div class="container">
          <div class="row">
            <div class="col-md-6 padding-top-50">
              <section class="get-in-touch full_width">


                <div class="form-field col col-md-12">
                  <mat-form-field class="input-full-width">
                    <mat-icon matPrefix>perm_identity</mat-icon>
                    <input matInput placeholder="Owner Name" formControlName="owner_name" [(ngModel)]="setp_three_data.owner_name">
                    <mat-error *ngIf="isFieldValid(stepThree,'owner_name')"> Please Enter Owner Name</mat-error>
                  </mat-form-field>
                  <p class="btn-switch">
                    <mat-slide-toggle></mat-slide-toggle>
                  </p>
                </div>
                <div class="form-field col col-md-12">
                  <!-- <mat-form-field class="input-full-width">
                                        <mat-icon matPrefix>perm_identity</mat-icon>
                                        <input matInput placeholder="Owner Designation" formControlName="owner_designation" [(ngModel)]="setp_three_data.owner_designation">
    
                                    </mat-form-field> -->
                  <mat-form-field>
                    <mat-select placeholder="Owner Designation" formControlName="owner_designation" [(ngModel)]="setp_three_data.owner_designation">
                      <mat-option *ngFor="let designation of designations" [value]="designation.id">
                        {{ designation.designation_name }}
                      </mat-option>
                      <mat-error *ngIf="isFieldValid(stepThree,'owner_designation')">Please choose Owner Designation</mat-error>
                    </mat-select>
                  </mat-form-field>
                  <p class="btn-switch">
                    <mat-slide-toggle></mat-slide-toggle>
                  </p>
                </div>
                <div class="form-field col col-md-12">
                  <mat-form-field class="input-full-width">
                    <mat-icon matPrefix>calendar_today</mat-icon>
                    <input matInput placeholder="Established in The Year" formControlName="business_est_year" [(ngModel)]="setp_three_data.business_est_year">
                  </mat-form-field>
                  <p class="btn-switch">
                    <mat-slide-toggle></mat-slide-toggle>
                  </p>
                </div>
                <div class="form-field col col-md-12">
                  <mat-form-field class="input-full-width">
                    <mat-icon matPrefix>location_on</mat-icon>
                    <input matInput placeholder="Business location" autocorrect="off" autocapitalize="off" spellcheck="off" #search formControlName="store_address"
                      [(ngModel)]="setp_three_data.store_address">
                    <input type="hidden" formControlName="lat" [(ngModel)]="setp_three_data.lat">
                    <input type="hidden" formControlName="long" [(ngModel)]="setp_three_data.long">
                  </mat-form-field>
                  <p class="btn-switch">
                    <mat-slide-toggle></mat-slide-toggle>
                  </p>
                </div>
                <div class="form-field col-md-12">
                  <div class="upload-filed  oner-photo">
                    <input type="file" name="owner_pic" formControlName="owner_pic" (change)="ownerLogoChange($event.target.files)" accept="image/*">
                    <p class="btn-switch">
                      <mat-slide-toggle></mat-slide-toggle>
                    </p>
                  </div>
                </div>
                <div class="form-field col-md-12">
                  <div class="row">
                    <div class="form-field  align-center col-md-5">
                      <button type="button" matStepperPrevious class="round-g-btn" (click)="goToStep(2)">Back</button>
                    </div>
                    <div class="form-field align-center col-md-5">
                      <button class="round-g-btn" (click)="submitStepThree()">Next</button>
                    </div>
                  </div>
                </div>

              </section>


            </div>
            <div class="col-md-6">
              <div class="col-md-12 get-in-touch  padding-top-bottom-10">
                <div class="container">
                  <h1 class="title fontface-one text-color-darkgrey-b letter-spacing">
                    OWNER INTRODUCTION
                  </h1>
                </div>
              </div>

              <div class="mob">
                <div class="wallpaper-size profile-page apps-design padding-10 text-center ">

                  <img [src]="setp_three_data.owner_pic ?setp_three_data.owner_pic : 'assets/images/resturent-logo.png'" alt="">

                  <h1>{{setp_three_data.owner_name}}</h1>
                  <!-- <div class="description ">
                                        <span *ngIf="setp_three_data.owner_designation != ''">Designation</span>
                                        <p>{{setp_three_data.owner_designation}}</p>
                                    </div> -->
                  <!-- <div class="description ">
                                        <span>Ex. Year</span>
                                        <p>{{setp_three_data.owner_name}}</p>
                                    </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="stepFive">
      <div class="col-md-12 get-in-touch padding-top-bottom-10">
        <div class="container">
          <h1 class="title fontface-one text-color-dark letter-spacing">
            All about the product/ service
          </h1>
        </div>
      </div>

      <div class="container min-height-600 padding-top-25">
        <div class="row">
          <div class="col-md-9">
            <section class="get-in-touch">


              <form [formGroup]="stepFive">
                <div class="col-md-12" formArrayName="product_categories">
                  <div class="row" *ngFor="let categories of geCategory(stepFive); let i = index;">
                    <div class="col-md-12" [formGroupName]="i">
                      <div class="row">
                        <div class="col-md-8">
                          <mat-form-field class="input-full-width">
                            <mat-icon matPrefix>info</mat-icon>
                            <input matInput placeholder="Category" [(ngModel)]="step_five_data.product_categories[i].category_name" name="category_name"
                              formControlName="category_name">
                            <!-- <mat-error *ngIf="isFieldValid(stepFive,'owner_name')"> Please Enter Owner Name</mat-error> -->
                          </mat-form-field>
                        </div>
                        <div class="col-md-2 pick-oftext">
                          <a routerLink="." (click)="addProductCategory()" title="Add More" name="Add More" *ngIf="i == 0 && geCategory(stepFive).length<2 ">
                            <i class="fa fa-plus"></i>
                            <span>Add Category</span>
                          </a>
                          <a href="javascript:void(0);" title="Delete" name="Delete" *ngIf="i > 0" (click)="deleteProductCategory(i)">
                            <i class="fa fa-times-circle fa-2"></i>
                            <span>Remove</span>
                          </a>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12" style="text-align: right">
                  <button mat-button class="round-g-biscuit" (click)="submitCategory()">Add Product</button>
                </div>
              </form>

              <div class="add-product padding-10 margin-top-10  bg-white box-shadow" *ngIf="step_five_data.product_categories[0].id!=null">
                <mat-tab-group>
                  <mat-tab label="{{product_cat.category_name}}" *ngFor="let product_cat of step_five_data.product_categories; let i = index;">
                    <div class="col-md-12" style="padding-top:10px; " *ngIf="i == 0">
                      <form class="row" [formGroup]="stepFiveProductCat1">
                        <div class="col-md-12" formArrayName="products">
                          <div class="row" *ngFor="let product of getProduct(stepFiveProductCat1); let j = index;">
                            <div class="col-md-12" [formGroupName]="j">
                              <div class="row">
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput placeholder="Product Name" name="product_name" [(ngModel)]="step_five_data_cat_1.products[j].product_name"
                                      formControlName="product_name">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput appOnlyNumber placeholder="Price" [(ngModel)]="step_five_data_cat_1.products[j].price" name="price" formControlName="price">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput appOnlyNumber placeholder="Discounted Price" [(ngModel)]="step_five_data_cat_1.products[j].discounted_price"
                                      name="discounted_price" formControlName="discounted_price">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput appOnlyNumber placeholder="Packing Charges" [(ngModel)]="step_five_data_cat_1.products[j].packing_charges"
                                      name="packing_charges" formControlName="packing_charges">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput placeholder="tags" [(ngModel)]="step_five_data_cat_1.products[j].tags" name="tags" formControlName="tags">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2 pick-oftext">
                                  <a routerLink="." (click)="addProduct(i,product_cat.id)" title="Add More" name="Add More" *ngIf="j == 0">
                                    <i class="fa fa-plus"></i>
                                    <span>Add Category</span>
                                  </a>
                                  <a href="javascript:void(0);" title="Delete" name="Delete" *ngIf="j > 0" (click)="deleteProduct(j,i)">
                                    <i class="fa fa-times-circle fa-2"></i>
                                    <span>Remove</span>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12" style="text-align: right">
                          <button mat-button class="round-g-biscuit" (click)="submitProduct(i)">Confirm</button>
                        </div>

                      </form>
                    </div>
                    <div class="col-md-12" *ngIf="i == 1">
                      <form class="row" [formGroup]="stepFiveProductCat2">
                        <div class="col-md-12" formArrayName="products">
                          <div class="row" *ngFor="let product of getProduct(stepFiveProductCat2); let j = index;">
                            <div class="col-md-12" [formGroupName]="j">
                              <div class="row">
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput placeholder="Product Name" name="product_name" [(ngModel)]="step_five_data_cat_2.products[j].product_name"
                                      formControlName="product_name">

                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput appOnlyNumber placeholder="Price" name="price" [(ngModel)]="step_five_data_cat_2.products[j].price" formControlName="price">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput appOnlyNumber placeholder="Discounted Price" [(ngModel)]="step_five_data_cat_2.products[j].discounted_price"
                                      name="discounted_price" formControlName="discounted_price">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput appOnlyNumber placeholder="Packing Charges" [(ngModel)]="step_five_data_cat_2.products[j].packing_charges"
                                      name="packing_charges" formControlName="packing_charges">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2">
                                  <mat-form-field class="input-full-width">
                                    <input matInput placeholder="Tags" name="tags" [(ngModel)]="step_five_data_cat_2.products[j].tags" formControlName="tags">
                                  </mat-form-field>
                                </div>
                                <div class="col-md-2  pick-oftext">
                                  <a mat-button routerLink="." (click)="addProduct(i,product_cat.id)" title="Add More" name="Add More" *ngIf="j == 0">
                                    <i class="fa fa-plus"></i>
                                    <span>Add Product</span>

                                  </a>
                                  <a mat-button href="javascript:void(0);" title="Delete" name="Delete" *ngIf="j > 0" (click)="deleteProduct(j,i)">
                                    <i class="fa fa-times-circle fa-2"></i>
                                    <span>Remove</span>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12" style="text-align: right">
                          <button mat-button class="round-g-biscuit" (click)="submitProduct(i)">Submit</button>
                        </div>
                      </form>
                    </div>
                  </mat-tab>
                </mat-tab-group>
              </div>
              <hr>
              <div class="col-md-6">
                <div class="row">
                  <div class="align-center col-md-5">
                    <button mat-button type="button" matStepperPrevious class="round-g-grey" (click)="goToStep(4)">Back</button>
                  </div>
                  <div class="align-center col-md-5" *ngIf="app_details.is_paid == false">
                    <button mat-button class="round-g-btn" (click)="goToPayment()">Next</button>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div class="col-md-3">

            <div class="mob">
              <div class="wallpaper-size resturent-screen apps-design padding-10 text-center ">

                <img [src]="step_one_data.logo ?step_one_data.logo : 'assets/images/resturent-logo.png'" alt="">

                <h1>{{step_one_data.business_name}}</h1>
                <div class="description">


                </div>
                <div class="description ">

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </mat-step>
    
  </mat-horizontal-stepper>
</div>
</loading>